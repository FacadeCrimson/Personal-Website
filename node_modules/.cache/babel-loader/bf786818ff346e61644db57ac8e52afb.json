{"ast":null,"code":"import _classCallCheck from\"/Users/apple/Downloads/React/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/apple/Downloads/React/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/apple/Downloads/React/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/apple/Downloads/React/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';var Square=/*#__PURE__*/function(_React$Component){_inherits(Square,_React$Component);var _super=_createSuper(Square);function Square(){_classCallCheck(this,Square);return _super.apply(this,arguments);}_createClass(Square,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"button\",{className:\"square\",style:this.props.color===\"#fff\"?{}:{background:this.props.color}});}}]);return Square;}(React.Component);var Board=/*#__PURE__*/function(_React$Component2){_inherits(Board,_React$Component2);var _super2=_createSuper(Board);function Board(){_classCallCheck(this,Board);return _super2.apply(this,arguments);}_createClass(Board,[{key:\"renderSquare\",value:function renderSquare(i,j){var color=arguments.length>2&&arguments[2]!==undefined?arguments[2]:\"#fff\";return/*#__PURE__*/React.createElement(Square,{key:[i,j].toString(),color:color});}},{key:\"render\",value:function render(){var playground=[];var pos=0;var len=this.props.len;for(var i=0;i<len;i++){var row=[];for(var j=0;j<10;j++){if(this.props.snake.includes(pos)||this.props.food===pos){row.push(this.renderSquare(i,j,\"#060606\"));pos+=1;continue;}row.push(this.renderSquare(i,j));pos+=1;}var newRow=/*#__PURE__*/React.createElement(\"div\",{className:\"board-row\",key:i},row);playground.push(newRow);}var boardStyle={opacity:1.0};if(!this.props.game){boardStyle={opacity:0.5};}return/*#__PURE__*/React.createElement(\"div\",{style:boardStyle},playground);}}]);return Board;}(React.Component);var Control=/*#__PURE__*/function(_React$Component3){_inherits(Control,_React$Component3);var _super3=_createSuper(Control);function Control(){_classCallCheck(this,Control);return _super3.apply(this,arguments);}_createClass(Control,[{key:\"render\",value:function render(){var _this=this;return/*#__PURE__*/React.createElement(\"button\",{className:\"control\",onClick:function onClick(){return _this.props.onClick();}});}}]);return Control;}(React.Component);function Warning(props){if(props.game){return null;}return/*#__PURE__*/React.createElement(\"div\",{className:\"warning\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Your game ends!\"),/*#__PURE__*/React.createElement(\"h1\",null,\"Your score is \",props.snake.length,\".\"));}var Game=/*#__PURE__*/function(_React$Component4){_inherits(Game,_React$Component4);var _super4=_createSuper(Game);function Game(props){var _this2;_classCallCheck(this,Game);_this2=_super4.call(this,props);_this2.handleKeyPress=function(event){if(!_this2.state.game){return;}var addition=_this2.state.len;var newPos=undefined;var food=_this2.state.food;var newSnake=_this2.state.snake.slice();switch(event.key){case\"ArrowDown\":newPos=newSnake[0]+addition;break;case\"ArrowUp\":newPos=newSnake[0]-addition;break;case\"ArrowLeft\":newPos=newSnake[0]-1;if(newPos%10===9){_this2.setState({game:false});return;}break;case\"ArrowRight\":newPos=newSnake[0]+1;if(newPos%10===0){_this2.setState({game:false});return;}break;default:break;}if(newPos===food){_this2.eatFood(food);_this2.generateFood();return;}if(newPos<0||newSnake.includes(newPos)||newPos>Math.pow(10,2)-1){_this2.setState({game:false});return;}newSnake.unshift(newPos);newSnake.pop();_this2.setState({snake:newSnake});};_this2.state={len:10,snake:[0],food:undefined,game:true};return _this2;}_createClass(Game,[{key:\"generateFood\",value:function generateFood(){var newFood=undefined;do{newFood=Math.floor(Math.random()*Math.pow(10,2));}while(newFood in this.state.snake);this.setState({food:newFood});}},{key:\"eatFood\",value:function eatFood(food){var newSnake=this.state.snake.slice();newSnake.unshift(food);this.setState({snake:newSnake});}},{key:\"componentDidMount\",value:function componentDidMount(){this.generateFood();document.addEventListener(\"keydown\",this.handleKeyPress,false);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){document.removeEventListener(\"keydown\",this.handleKeyPress,false);}},{key:\"reset\",value:function reset(){this.setState({snake:[0],game:true});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"game\"},/*#__PURE__*/React.createElement(\"div\",{className:\"game-board\"},/*#__PURE__*/React.createElement(Warning,{game:this.state.game,snake:this.state.snake}),/*#__PURE__*/React.createElement(Board,{snake:this.state.snake,len:this.state.len,food:this.state.food,game:this.state.game})),/*#__PURE__*/React.createElement(\"div\",{className:\"side-board\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"title\"},\" Reset game \"),/*#__PURE__*/React.createElement(Control,{onClick:function onClick(){return _this3.reset();}})));}}]);return Game;}(React.Component);function App(){return/*#__PURE__*/React.createElement(Game,null);}export default App;","map":{"version":3,"sources":["/Users/apple/Downloads/React/my-app/src/App.js"],"names":["React","Square","props","color","background","Component","Board","i","j","toString","playground","pos","len","row","snake","includes","food","push","renderSquare","newRow","boardStyle","opacity","game","Control","onClick","Warning","length","Game","handleKeyPress","event","state","addition","newPos","undefined","newSnake","slice","key","setState","eatFood","generateFood","Math","pow","unshift","pop","newFood","floor","random","document","addEventListener","removeEventListener","reset","App"],"mappings":"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","sourcesContent":["import React from 'react';\n\nclass Square extends React.Component {\n\n  render() {\n    return (\n      <button className=\"square\" style={(this.props.color===\"#fff\")?{}:{background: this.props.color}}>\n      </button>\n    );\n  }\n}\n\nclass Board extends React.Component {\n\n  renderSquare(i,j, color = \"#fff\") {\n    return <Square key ={[i,j].toString()} color = {color} />\n  }\n\n  render() {\n    const playground = [];\n    var pos = 0;\n    var len = this.props.len;\n    for(let i = 0; i < len; i++){\n  \n      const row = [];\n      \n      for(let j = 0; j < 10; j++){\n        if(this.props.snake.includes(pos) || this.props.food === pos){\n          row.push(this.renderSquare(i,j,\"#060606\"))\n          pos+=1;\n          continue;\n        }\n        row.push(this.renderSquare(i,j))\n        pos+=1;\n      }\n      const newRow =  <div className=\"board-row\" key = {i}>{row}</div>\n      playground.push(newRow)\n    }\n\n    let boardStyle = {\n      opacity: 1.0\n    };\n      if (!this.props.game) {\n        boardStyle = {\n          opacity:0.5\n        }  \n    }\n\n    return (\n      <div style={boardStyle}>\n        {playground}\n      </div>\n    );\n  }\n}\n\nclass Control extends React.Component{\n  render() {\n    return (\n      <button className=\"control\" onClick={() => this.props.onClick()}>\n      </button>\n    );\n  }\n}\n\nfunction Warning(props){\n  if(props.game){\n    return null;\n  }\n  return (<div className=\"warning\"><h1>Your game ends!</h1>\n          <h1>Your score is {props.snake.length}.</h1></div>)\n\n}\n\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      len: 10,\n      snake: [0],\n      food:undefined,\n      game: true,\n    };\n  }\n\n  generateFood(){\n    var newFood = undefined;\n    do{\n      newFood = Math.floor(Math.random() * Math.pow(10,2))\n    }\n      while(newFood in this.state.snake);\n      this.setState(({\n        food: newFood\n      })) \n  }\n\n  eatFood(food){\n    var newSnake = this.state.snake.slice();\n    newSnake.unshift(food);\n    this.setState({snake: newSnake})\n  }\n\n  handleKeyPress = (event) => {\n    if(!this.state.game){\n      return;\n    }\n    var addition = this.state.len\n    var newPos = undefined;\n    var food =this.state.food;\n    var newSnake = this.state.snake.slice();\n    switch (event.key) {\n    case \"ArrowDown\":\n      newPos = newSnake[0]+addition;\n      break;\n    case \"ArrowUp\":\n      newPos = newSnake[0]-addition;\n      break;\n    case \"ArrowLeft\":\n      newPos = newSnake[0]-1; \n      if (newPos%10===9){\n        this.setState({game:false})\n        return;\n      }\n      break;\n    case \"ArrowRight\":\n      newPos = newSnake[0]+1;\n      if (newPos%10===0){\n        this.setState({game:false})\n        return;\n      }\n      break;\n    default:\n      break;\n    }\n    if (newPos === food){\n      this.eatFood(food);\n      this.generateFood();\n      return;\n    }\n    if (newPos < 0 || newSnake.includes(newPos) || newPos > Math.pow(10,2)-1){\n      this.setState({game:false})\n      return;\n    }\n    newSnake.unshift(newPos);\n    newSnake.pop();\n    this.setState({snake: newSnake})\n  }\n\n  componentDidMount(){\n    this.generateFood();\n    document.addEventListener(\"keydown\", this.handleKeyPress, false);\n  }\n\n  componentWillUnmount(){\n    document.removeEventListener(\"keydown\", this.handleKeyPress, false);\n  }\n\n  reset(){\n    this.setState({snake: [0],game:true,})\n  }\n\n  render() {\n    return (\n      <div className=\"game\">\n        <div className=\"game-board\">\n          <Warning game={this.state.game} snake={this.state.snake}/>\n          <Board snake={this.state.snake} len ={this.state.len} food={this.state.food} game={this.state.game}/>\n        </div>\n        <div className=\"side-board\">\n          <h2 className=\"title\"> Reset game </h2>\n          <Control onClick={()=>this.reset()}/>\n        </div>\n      </div>\n    );\n  }\n}\n\n\nfunction App() {\n  \n  return (\n    <Game />\n  )\n} \n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}